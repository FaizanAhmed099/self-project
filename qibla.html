<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qibla-Direction</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
</head>
<style>
  .container {
  background: rgb(0 0 0 / 0%);
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 0 20px rgb(0 0 0);
  text-align: center;
  max-width: 39rem;
  width: 90%;
}

h1 {
  margin-bottom: 20px;
  font-size: 2.5rem;
}

#error {
  color: #ff6b6b;
  margin-top: 10px;
  font-size: 14px;
}

</style>
<body class="about-bg">
  <!-- Background Video -->
  <video class="bg-video" autoplay loop muted playsinline>
    <source src="assets/images/islamic-book-2023-12-07-00-17-11-utc.mov" type="video/mp4">
  </video>

  <!-- Navbar/Menu Button -->
  <header class="navbar-container">
    <button class="menu-btn" id="menuToggle">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="close-icon">✕</span>
    </button>
  </header>

  <!-- Sidebar -->
  <aside class="sidebar-right" id="sidebar">
    <button class="sidebar-close-btn" id="sidebarClose">✕</button>
    <div class="sidebar-content">
      <img src="assets/images/profile-pic.jpg" class="user-icon" alt="User" />
      <hr>
      <p class="login-text">Login</p>
      <hr>
      <a href="index.html" class="menu-btn-outline">HOME</a>
      <a href="chapters.html" class="menu-btn-filled">CHAPTER</a>
      <a href="surahs.html" class="menu-btn-filled">SURAH</a>
      <a href="editions.html" class="menu-btn-filled">EDITIONS</a>
      <a href="#" class="menu-btn-filled">QIBLA DIRECTION</a>
      <a href="#" class="menu-btn-filled">PRAYER TIMES</a>
      <a href="#" class="menu-btn-filled">RAMADAN TRACKER</a>
      <section class="info-section">
        <div class="info-item">
          <div class="info-header">
            <a href="about.html">
              <span class="info-title">&#8250; About us</span>
            </a>
          </div>
        </div>
        <div class="info-item">
          <div class="info-header">
            <a href="privacy.html">
              <span class="info-title">&#8250; Privacy Policy</span>
            </a>
          </div>
        </div>
        <div class="info-item">
          <div class="info-header">
            <a href="terms.html">
              <span class="info-title">&#8250; Terms and Conditions</span>
            </a>
          </div>
        </div>
        <div class="info-item">
          <div class="info-header">
            <a href="index.html">
              <span class="info-title">&#8250; Contact us</span>
            </a>
          </div>
        </div>
      </section>
    </div>
  </aside>

  <div class="container">
    <h1>🕌 Qibla Direction Finder</h1>
    <div id="location">Detecting your location...</div>
    <div id="qibla">Fetching Qibla direction...</div>
    <div id="error" class="error"></div>
  </div>


  <script src="script.js"></script>
  <script>
    function getDirection(lat, lon) {
  fetch(`https://api.aladhan.com/v1/qibla/${lat}/${lon}`)
    .then(res => res.json())
    .then(data => {
      const direction = Math.round(data.data.direction);
      document.getElementById("qibla").innerText = `🕋 Qibla Direction: ${direction}° from North`;
    })
    .catch(() => {
      document.getElementById("qibla").innerText = "Failed to fetch Qibla direction.";
    });
}

function getLocationName(lat, lon) {
  fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`)
    .then(res => res.json())
    .then(data => {
      const city = data.address.city || data.address.town || data.address.village || "your location";
      document.getElementById("location").innerText = `📍 Your Location: ${city}`;
    })
    .catch(() => {
      document.getElementById("location").innerText = `📍 Latitude: ${lat}, Longitude: ${lon}`;
    });
}

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    position => {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      getLocationName(lat, lon);
      getDirection(lat, lon);
    },
    error => {
      document.getElementById("error").innerText = "Location access denied. Please allow location access.";
    }
  );
} else {
  document.getElementById("error").innerText = "Geolocation is not supported by this browser.";
}

  </script>

</body>
</html>

